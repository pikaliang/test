<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>牌照</title>
    <script src="jquery-3.5.0.min.js"></script>
    <script src="echarts.min.js"></script>
    <script>
        ;(function (designWidth, maxWidth) {
      var doc = document,
        win = window;
      var docEl = doc.documentElement;
      var tid;
      var rootItem, rootStyle;

      function refreshRem() {
        var width = docEl.getBoundingClientRect().width;
        if (!maxWidth) {
          maxWidth = 540;
        }
        ;
        if (width > maxWidth) {
          width = maxWidth;
        }
        //与淘宝做法不同，直接采用简单的rem换算方法1rem=100px
        var rem = width * 100 / designWidth;
        //兼容UC开始
        rootStyle = "html{font-size:" + rem + 'px !important}';
        rootItem = document.getElementById('rootsize') || document.createElement("style");
        if (!document.getElementById('rootsize')) {
          document.getElementsByTagName("head")[0].appendChild(rootItem);
          rootItem.id = 'rootsize';
        }
        if (rootItem.styleSheet) {
          rootItem.styleSheet.disabled || (rootItem.styleSheet.cssText = rootStyle)
        } else {
          try {
            rootItem.innerHTML = rootStyle
          } catch (f) {
            rootItem.innerText = rootStyle
          }
        }
        //兼容UC结束
        docEl.style.fontSize = rem + "px";
      };
      refreshRem();
      win.addEventListener("resize", function () {
        clearTimeout(tid); //防止执行两次
        tid = setTimeout(refreshRem, 300);
      }, false);
      win.addEventListener("pageshow", function (e) {
        if (e.persisted) { // 浏览器后退的时候重新计算
          clearTimeout(tid);
          tid = setTimeout(refreshRem, 300);
        }
      }, false);
      if (doc.readyState === "complete") {
        doc.body.style.fontSize = "16px";
      } else {
        doc.addEventListener("DOMContentLoaded", function (e) {
          doc.body.style.fontSize = "16px";
        }, false);
      }
    })(375, 750);
    </script>
    <style>
        #main{
            width: 3rem;
            height: auto;
            float: right;
        }
        form{
            line-height: .2rem;
            font-size: .14rem;
        }
    </style>
</head>
<body>
    <form>
        <div> 小车：<input type="text" name="小车" ></div>
        <div> 大车：<input type="text" name="大车" ></div>
        <div>挂车:<input type="text" name="挂车" ></div>
        <div>摩托：<input type="text" name="摩托" ></div>
        <div>农用：<input type="text" name="农用" ></div>
        <div> 学车：<input type="text" name="学车" ></div>
        <div>万国小车：<input type="text" name="万国小车" ></div>
        <div>大同小车：<input type="text" name="大同小车" ></div>
        <div>新能源小车:<input type="text" name="新能源小车" ></div>
        <div>新能源大车：<input type="text" name="新能源大车" ></div>

         <input type="button" value="生成示意图" id="submit">
     </form>
    <div id="main" style="width: 3rem">
    </div>
    

    <script>
    $(function() {
    $('#submit').click(function() {
        var obj = {};
        var str= $('form').serializeArray();
        console.log("str",str)
        let arr1 =[], arr2 = [];
        str.forEach((item => {
            arr1.push(item.name)
            arr2.push(Number(item.value))
        }))
        console.log(arr1)
        console.log(arr2)
     // 基于准备好的dom，初始化echarts实例
     var myChart = echarts.init(document.getElementById('main'));

    // 指定图表的配置项和数据
    var option = {
        toolbox: {
        show: true,
        feature: {
        dataZoom: {
            yAxisIndex: "none"
        },
        dataView: {
            readOnly: false
        },
        magicType: {
            type: ["line", "bar"]
        },
        restore: {},
        saveAsImage: {}
        }
  },
        title: {
            text: '牌照生产示意图 单位（片）'
        },
        tooltip: {
            show:true
        },
        legend: {
            data:['产量']
        },
        xAxis: {
            data: arr1
        },
        yAxis: {
            type: 'value',
        },
        series: [{
            name: '产量',
            type: 'bar',
            data: arr2,
            label: {
                show: true,
                position: 'inside'
            },
        }]
    };
    
    // 使用刚指定的配置项和数据显示图表。
    myChart.setOption(option);
});
    });
    </script>
</body>
</html>
